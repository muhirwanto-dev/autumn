@page "/"
@using Autumn.Wasm.ViewModel
@using Blazing.Mvvm.Components

@inherits MvvmComponentBase<HomeViewModel>

<PageTitle>Home</PageTitle>

<MudContainer MaxWidth="MaxWidth.Large">
    <MudStack AlignItems="AlignItems.Center">
        <MudText Typo="Typo.h3" Class="fw-bold mt-5" Align="Align.Center" Color="Color.Primary">Hi! I'm 
            <MudText Inline="true" Typo="Typo.h3" Class="fw-bold mt-5" Color="Color.Secondary">@(ViewModel!.Profile?.NickName ?? ViewModel!.Profile?.FirstName)</MudText>
            , nice to meet you!</MudText>
        <MudText Style="margin-left: 150px; margin-right: 150px;" Typo="Typo.h6" Align="Align.Center">@ViewModel!.Profile?.TagLine</MudText>
        <MudImage Src="images/home_banner.png" Alt=".NET Developer banner" Height="360" Class="rounded-lg mx-4 mt-4" />
    </MudStack>
</MudContainer>

@if (ViewModel!.Profile?.AboutMe is string aboutMe)
{
    <MudContainer Class="mud-theme-primary w-100" Style="padding: 120px; padding-bottom: 250px;">
        <MudText Align="Align.Center" Typo="Typo.h3" Class="fw-bold my-5 text-white">ABOUT 
            <MudText Inline="true" Typo="Typo.h3" Class="fw-bold my-5" Color="Color.Secondary">ME</MudText>
            </MudText>
        <MudText Align="Align.Center" Class="text-white">@aboutMe</MudText>
    </MudContainer>
}

<MudContainer MaxWidth="MaxWidth.Large" Style="margin-top: -100px;" Class="d-flex gap-3">
    @foreach (var role in ViewModel!.Profile?.Roles ?? [])
    {
        <MudCard Class="flex-grow-1 col" Style="padding-top: 50px; padding-bottom: 50px; padding-left: 20px; padding-right: 20px;">
            <MudCardContent>
                <MudStack AlignItems="AlignItems.Center">
                    <MudImage Src="@(role.Image ?? role.ImageUrl)" Height="96" Width="96" Class="rounded-circle p-3" Style="background-color: plum;" />
                    <MudText Typo="Typo.h6" Class="fw-bold" Align="Align.Center">@role.RoleName</MudText>
                    <MudText Typo="Typo.body1" Align="Align.Center">@role.RoleDescription</MudText>

                    <MudStack Row="true" Justify="Justify.FlexStart" Wrap="Wrap.Wrap" Spacing="0">
                        @foreach (var tech in role.TechStack)
                        {
                            <MudChip T="string">@tech</MudChip>
                        }
                    </MudStack>
                </MudStack>
            </MudCardContent>
        </MudCard>
    }
</MudContainer>

<MudContainer Style="margin-block: 150px;">
    <MudText Align="Align.Center" Typo="Typo.h3" Class="mb-5">MY EXPERIENCES</MudText>
    <MudTimeline TimelinePosition="TimelinePosition.Alternate" TimelineAlign="TimelineAlign.Start">
        @foreach (var (exp, index) in ViewModel!.Experiences.Reverse().Select((e, idx) => (e, idx)))
        {
            Color timelineColor = (index == 0) ? Color.Success : Color.Default;
            Size timelineSize = (index == 0) ? Size.Medium : Size.Small;

            <MudTimelineItem Color="@timelineColor" Variant="Variant.Outlined" Size="@timelineSize">
                <ItemContent>
                    <MudText Color="Color.Info" Typo="Typo.h6">@($"{exp.StartDate} - {exp.EndDate}")</MudText>
                    <MudText Typo="Typo.h6" Class="mb-4">@exp.CompanyName</MudText>
                    <MudText>@exp.Description</MudText>
                </ItemContent>
            </MudTimelineItem>
        }
    </MudTimeline>
</MudContainer>

<MudContainer>
    <MudStack AlignItems="AlignItems.Center" Style="margin-top: 100px;">
        <MudText Align="Align.Center" Typo="Typo.h4" Class="fw-bold my-5">My Recent Work</MudText>
        <MudText Align="Align.Center">
            Here are a few past projects I've worked on. Want to see more?
            <MudLink Href="#">Email me!</MudLink>
        </MudText>

        <MudGrid>
            <MudImage Src="https://play-lh.googleusercontent.com/hiP5RcKDSW7CsX6h5KKz3MsqC6U-guov6E5xwtc8p-Qz-knht4OUfvInhlJi5sYNIAJI=s188-rw"></MudImage>
        </MudGrid>
    </MudStack>
</MudContainer>

<MudScrollToTop>
    <MudFab Color="Color.Tertiary" StartIcon="@Icons.Material.Filled.ArrowUpward" />
</MudScrollToTop>
